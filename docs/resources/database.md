---
page_title: "Resource filess_database - terraform-provider-dedicated"
subcategory: ""
description: |-
  
---

# Resource: filess_database



The `filess_database` resource allows you to create and manage dedicated database instances on filess.io.

## Features

- ✅ Automatic credential provisioning
- ✅ Waits for database to be fully ready before completing
- ✅ Integrated Stripe checkout for billing
- ✅ Supports multiple database engines (MySQL, PostgreSQL, MariaDB, MongoDB, etc.)
- ✅ Multi-region deployment
- ✅ Configurable resource allocation (CPU, memory, storage, bandwidth)

## Example Usage

### Basic MySQL Database

```hcl
data "filess_engines" "mysql" {}
data "filess_regions" "available" {}

locals {
  mysql_engine = [
    for engine in data.filess_engines.mysql.engines :
    engine if engine.name == "MySQL" && engine.version == "8.0"
  ][0]
}

resource "filess_database" "production" {
  organization_slug = "my-org"
  namespace_slug    = "production"
  
  name        = "prod-mysql-db"
  description = "Production MySQL database"
  
  engine_id = local.mysql_engine.id
  region_id = data.filess_regions.available.regions[0].id
  
  database_plan {
    billable_items {
      billable_item_id = "6"   # Storage 0.5GiB
      quantity         = 1
    }
    
    billable_items {
      billable_item_id = "7"   # Network Bandwidth 1MB/s
      quantity         = 100
    }
    
    billable_items {
      billable_item_id = "8"   # Choose Region
      quantity         = 1
    }
    
    billable_items {
      billable_item_id = "10"  # CPU Core 0.25
      quantity         = 1
    }
    
    billable_items {
      billable_item_id = "12"  # Database Setup
      quantity         = 1
    }
    
    billable_items {
      billable_item_id = "13"  # Memory 0.5GiB
      quantity         = 1
    }
  }
}

# Output connection details
output "db_connection_string" {
  value = "mysql://${filess_database.production.database_username}:${filess_database.production.database_password}@${filess_database.production.database_hostname}:${filess_database.production.database_service_port}"
  sensitive = true
}
```

### With IP Whitelist

```hcl
resource "filess_database" "secure" {
  organization_slug = "my-org"
  namespace_slug    = "production"
  
  name        = "secure-db"
  description = "Database with IP restrictions"
  
  engine_id = "4"
  region_id = "1"
  
  ip_whitelist_ids = ["whitelist-id-1", "whitelist-id-2"]
  
  database_plan {
    # ... billable items configuration
  }
}
```

### PostgreSQL Database

```hcl
data "filess_engines" "postgres" {}

locals {
  postgres_engine = [
    for engine in data.filess_engines.postgres.engines :
    engine if engine.name == "PostgreSQL"
  ][0]
}

resource "filess_database" "analytics" {
  organization_slug = "my-org"
  namespace_slug    = "analytics"
  
  name        = "analytics-db"
  description = "PostgreSQL for analytics workloads"
  
  engine_id = local.postgres_engine.id
  region_id = "1"
  
  database_plan {
    # Configure resources based on workload
    billable_items {
      billable_item_id = "6"   # Storage
      quantity         = 10    # 5GB
    }
    
    billable_items {
      billable_item_id = "10"  # CPU
      quantity         = 4     # 1 vCPU
    }
    
    billable_items {
      billable_item_id = "13"  # Memory
      quantity         = 4     # 2GB RAM
    }
    
    # ... other required items
  }
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `database_plan` (Block List, Min: 1, Max: 1) Database plan configuration (see [below for nested schema](#nestedblock--database_plan))
- `engine_id` (String) Database engine ID
- `name` (String) Database name
- `namespace_slug` (String) Namespace slug
- `organization_slug` (String) Organization slug
- `region_id` (String) Region ID

### Optional

- `description` (String) Database description
- `ip_whitelist_ids` (List of String) List of IP whitelist IDs
- `ssh_key_ids` (List of String) List of SSH key IDs
- `tailscale_config_id` (String) Tailscale config ID

### Read-Only

- `created_at` (String) Database creation timestamp
- `database_hostname` (String) Hostname for connecting to the database
- `database_password` (String, Sensitive) Database password to use when connecting
- `database_service_port` (String) Service port for connecting to the database
- `database_username` (String) Database username to use when connecting
- `id` (String) The ID of this resource.
- `status` (String) Database status
- `stripe_checkout_url` (String) Stripe checkout URL to complete billing when required

<a id="nestedblock--database_plan"></a>
### Nested Schema for `database_plan`

Required:

- `billable_items` (Block Set, Min: 1) Set of billable items (see [below for nested schema](#nestedblock--database_plan--billable_items))

<a id="nestedblock--database_plan--billable_items"></a>
### Nested Schema for `database_plan.billable_items`

Required:

- `billable_item_id` (String) Billable item ID
- `quantity` (Number) Quantity of the billable item

## Import

Databases can be imported using their ID:

```bash
terraform import filess_database.example 123
```

## Connection Details

After creation, the following computed attributes are available for connecting to your database:

- `database_hostname`: The hostname to connect to
- `database_service_port`: The port number
- `database_username`: The database user (typically "root")
- `database_password`: The password (sensitive)

### Example: Using with Application

```hcl
resource "kubernetes_secret" "db_credentials" {
  metadata {
    name = "database-credentials"
  }

  data = {
    host     = filess_database.production.database_hostname
    port     = filess_database.production.database_service_port
    username = filess_database.production.database_username
    password = filess_database.production.database_password
  }

  type = "Opaque"
}
```

## Provisioning Behavior

### Automatic Waiting

The provider automatically waits for:
1. Database infrastructure to be deployed
2. Billing to be completed (if payment required)
3. Database credentials to be generated
4. Database to reach "deployed" status

This ensures that connection details are always available when the resource creation completes.

### Payment Required

If your organization requires payment setup, the provider will:
1. Display a Stripe checkout URL in the terminal
2. Wait for you to complete the payment
3. Continue provisioning once payment is confirmed

The apply will pause with a message like:

```
╔════════════════════════════════════════════════════════════╗
║  ⚠️  PAYMENT REQUIRED                                      ║
╚════════════════════════════════════════════════════════════╝

The database requires payment to continue provisioning.
Please open this URL to complete the Stripe checkout:

  https://checkout.stripe.com/...

Waiting for payment completion...
```

### State Reconciliation

If a database is deleted outside of Terraform (e.g., via the filess.io console), the provider will detect this on the next `terraform plan` and propose to recreate the resource.

## Timeouts

The provider uses the following default timeouts:
- **Create**: 30 minutes (includes waiting for credentials)
- **Read**: 30 seconds
- **Delete**: 5 minutes

## Notes

- Database names must be unique within your organization/namespace
- Some billable items are required (setup, region, storage, CPU, memory, bandwidth)
- The `engine_id` and `region_id` cannot be changed after creation (forces recreation)
- Connection credentials are only available after the database is fully deployed

